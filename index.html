<html>
  <head>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  </head>
  <body>
    <a-scene embedded arjs="patternRatio:0.80">
      <!-- Marker Detection -->
      <a-marker type="pattern" url="qrcode.patt">
        <!-- 3D model with animation-mixer component -->
        <a-entity id="animated-object"
                  gltf-model="url(https://baptistajs.github.io/bottle-animation-test/garrafa-uncompressed.glb)" 
                  position="0 0 0" rotation="0 0 0" scale="50 50 50"
                  animation-mixer="loop: once">
        </a-entity>
      </a-marker>

      <!-- Camera -->
      <a-entity camera></a-entity>
    </a-scene>

    <script>
      // Add an event listener to play the animation on tap/click
      document.querySelector('#animated-object').addEventListener('click', function () {
        var entity = document.querySelector('#animated-object');
        var mixer = entity.getAttribute('animation-mixer');
        console.log('Object clicked, toggling animation...');
        
        // Toggle animation based on its current state
        if (mixer.action._paused) {
          mixer.action.play();
        } else {
          mixer.action.stop();
        }
      });
    </script>
  </body>
</html>
